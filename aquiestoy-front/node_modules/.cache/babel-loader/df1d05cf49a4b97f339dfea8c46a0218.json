{"ast":null,"code":"import _classCallCheck from \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/src/components/anuncios/AnunciosContainer.jsx\";\nimport React, { Component } from 'react';\nimport AnunciosDisplay from './AnunciosDisplay';\nimport CardPerfil from './CardPerfil';\nimport { createPub, getPub, createCom, getCom } from '../../services/anunciosService';\nimport toastr from 'toastr';\nimport Anuncios from './Anuncios';\nimport axios from 'axios';\nimport Comentarios from './Comentarios'; //import { Link} from 'react-router-dom'\n//import Card from './Anuncios';\n\nvar AnunciosContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AnunciosContainer, _Component);\n\n  function AnunciosContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AnunciosContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AnunciosContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      pubData: {},\n      pubs: [],\n      loading: false,\n      user: {},\n      comData: {},\n      comts: []\n    };\n\n    _this.onChange = function (e) {\n      var field = e.target.name;\n      var value = e.target.value;\n      var _this$state = _this.state,\n          pubData = _this$state.pubData,\n          comData = _this$state.comData;\n      pubData[field] = value;\n      comData[field] = value;\n      console.log(pubData);\n\n      _this.setState({\n        pubData: pubData,\n        comData: comData\n      });\n    };\n\n    _this.onChangeFile = function (e) {\n      var field = \"image\";\n      var pubData = _this.state.pubData;\n      pubData[field] = e.file.originFileObj;\n\n      _this.setState({\n        pubData: pubData\n      });\n    };\n\n    _this.getPubs = function () {\n      getPub().then(function (pubs) {\n        _this.setState({\n          pubs: pubs\n        }); //console.log(pubs)\n\n      }).catch(function (e) {\n        //return toastr.error('Algo salio mal')}\n        console.log(e);\n      });\n    };\n\n    _this.newPub = function (e) {\n      _this.setState({\n        loading: true\n      });\n\n      e.preventDefault();\n      var _this$state2 = _this.state,\n          pubData = _this$state2.pubData,\n          pubs = _this$state2.pubs;\n      createPub(pubData).then(function (r) {\n        console.log(r.data);\n        toastr.success(\"Publicado!\");\n\n        _this.props.history.push('/anuncios');\n      }).catch(function (e) {\n        _this.setState({\n          loading: false\n        });\n\n        return toastr.error(\"Algo salio mal.\");\n      });\n    };\n\n    _this.newComt = function (e, anuncio) {\n      //console.log('lol')\n      _this.setState({\n        loading: true\n      });\n\n      e.preventDefault();\n      var _this$state3 = _this.state,\n          comData = _this$state3.comData,\n          comts = _this$state3.comts;\n      comData['anuncio'] = anuncio;\n      createCom(comData).then(function (r) {\n        _this.setState({\n          comts: comts\n        }); //console.log(r.data)\n\n\n        toastr.success(\"ok!\");\n\n        _this.props.history.push('/anuncios');\n      }).catch(function (e) {\n        _this.setState({\n          loading: false\n        });\n\n        return toastr.error(\"Algo salio mal.\");\n      });\n    };\n\n    _this.getComt = function () {\n      getCom().then(function (comts) {\n        _this.setState({\n          comts: comts\n        });\n\n        console.log(comts);\n      }).catch(function (e) {\n        //return toastr.error('Algo salio mal')}\n        console.log(e);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AnunciosContainer, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var user = JSON.parse(localStorage.getItem('user'));\n      if (!user) return this.props.history.push('/login');\n      this.setState({\n        user: user\n      }); //this.getPubs()\n\n      var url = \"http://localhost:3000/\";\n      return axios.get(url + \"anuncios\", {\n        headers: {\n          'Authorization': localStorage.getItem('token')\n        }\n      }).then(function (event) {\n        _this2.setState({\n          pubs: event.data.anuncios\n        });\n      }).catch(function (error) {\n        return error;\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this3 = this;\n\n      var url = \"http://localhost:3000/\";\n      return axios.get(url + \"anuncios\", {\n        headers: {\n          'Authorization': localStorage.getItem('token')\n        }\n      }).then(function (event) {\n        _this3.setState({\n          pubs: event.data.anuncios\n        });\n      }).catch(function (error) {\n        return error;\n      });\n    } //---------------comentarios---------//\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(AnunciosDisplay, {\n        onChange: this.onChange,\n        onSubmit: this.newPub,\n        loading: this.loading,\n        onChangeFile: this.onChangeFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(Anuncios, {\n        adds: this.state.pubs,\n        dodds: this.state.comts,\n        onChange: this.onChange,\n        onSubmit: this.newComt,\n        loading: this.loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(Comentarios, {\n        adds: this.state.pubs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return AnunciosContainer;\n}(Component);\n\nexport default AnunciosContainer; // <Card pubs={pubs}/>","map":{"version":3,"sources":["/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/src/components/anuncios/AnunciosContainer.jsx"],"names":["React","Component","AnunciosDisplay","CardPerfil","createPub","getPub","createCom","getCom","toastr","Anuncios","axios","Comentarios","AnunciosContainer","state","pubData","pubs","loading","user","comData","comts","onChange","e","field","target","name","value","console","log","setState","onChangeFile","file","originFileObj","getPubs","then","catch","newPub","preventDefault","r","data","success","props","history","push","error","newComt","anuncio","getComt","JSON","parse","localStorage","getItem","url","get","headers","event","anuncios"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport AnunciosDisplay from './AnunciosDisplay';\nimport CardPerfil from './CardPerfil'\nimport {createPub,getPub,createCom,getCom} from '../../services/anunciosService'\nimport toastr from 'toastr'\nimport Anuncios from './Anuncios';\nimport axios from 'axios';\nimport Comentarios from './Comentarios';\n//import { Link} from 'react-router-dom'\n\n//import Card from './Anuncios';\n\n\n\n\nclass AnunciosContainer extends Component{\n\n    state = {\n        pubData:{},\n        pubs:[],\n        loading:false,\n        user:{},\n        comData:{},\n        comts:[]\n     }\n\n     componentWillMount(){\n         \n        const user = JSON.parse(localStorage.getItem('user'))\n        if(!user) return this.props.history.push('/login')\n        this.setState({user})\n        //this.getPubs()\n        \n        const url = \"http://localhost:3000/\"\n            return axios.get(url + \"anuncios\",{\n                headers:{\n                    'Authorization':localStorage.getItem('token')\n                }\n            })\n            .then(event=>{\n                this.setState({\n                    pubs: event.data.anuncios\n                })\n            })\n            .catch(error=>{\n                return error\n            })\n    }\n\n        onChange = (e) => {\n            const field = e.target.name\n            const value = e.target.value\n            const {pubData, comData} = this.state\n            pubData[field] = value\n            comData[field] = value\n            console.log(pubData)\n            this.setState({pubData, comData})\n        } \n     \n        onChangeFile = (e) => {\n            const field = \"image\"\n            const {pubData} = this.state\n            pubData[field] = e.file.originFileObj\n            this.setState({pubData})\n        }\n             \n\n        getPubs = ()=>{\n            getPub()\n            .then(pubs=>{\n                this.setState({pubs})\n                //console.log(pubs)\n            })\n            .catch(e=>{\n                //return toastr.error('Algo salio mal')}\n                console.log(e)\n                })\n        }   \n\n\n\n        newPub = (e) =>{\n            this.setState({loading:true})\n            e.preventDefault()\n            const {pubData, pubs} = this.state\n            createPub(pubData)\n            .then(r=>{\n                console.log(r.data)\n                toastr.success(\"Publicado!\")\n                this.props.history.push('/anuncios') \n                \n            })\n            .catch(e=>{\n                this.setState({loading:false})\n                return toastr.error(\"Algo salio mal.\")\n            })\n        }\n\n        componentDidUpdate() {\n            const url = \"http://localhost:3000/\"\n            return axios.get(url + \"anuncios\",{\n                headers:{\n                    'Authorization':localStorage.getItem('token')\n                }\n            })\n            .then(event=>{\n                this.setState({\n                    pubs: event.data.anuncios\n                })\n            })\n            .catch(error=>{\n                return error\n            })\n        }\n\n        //---------------comentarios---------//\n        newComt = (e, anuncio) =>{\n            //console.log('lol')\n            this.setState({loading:true})\n            e.preventDefault()\n            const {comData, comts} = this.state\n            comData['anuncio'] = anuncio\n            createCom(comData)\n            .then(r=>{\n                this.setState({comts})\n                //console.log(r.data)\n                toastr.success(\"ok!\")\n                this.props.history.push('/anuncios') \n                \n            })\n            .catch(e=>{\n                this.setState({loading:false})\n                return toastr.error(\"Algo salio mal.\")\n            })\n        }\n\n        getComt = ()=>{\n            getCom()\n            .then(comts=>{\n                this.setState({comts})\n                console.log(comts)\n            })\n            .catch(e=>{\n                //return toastr.error('Algo salio mal')}\n                console.log(e)\n                })\n        }\n  \n\n\n    render(){\n\n        return(\n            <div>\n              <AnunciosDisplay \n              onChange={this.onChange}\n              onSubmit={this.newPub}\n              loading={this.loading}\n              onChangeFile={this.onChangeFile}           \n              />\n\n              {/* <CardPerfil /> */}\n\n              <Anuncios \n               adds={this.state.pubs}\n               dodds={this.state.comts}\n               onChange={this.onChange}\n               onSubmit={this.newComt}\n               loading={this.loading}\n              />\n\n              <Comentarios\n               adds={this.state.pubs}\n              />\n\n              \n                            \n            </div>\n        )\n    }\n}\n\n\n\n\nexport default AnunciosContainer\n\n// <Card pubs={pubs}/>"]},"metadata":{},"sourceType":"module"}