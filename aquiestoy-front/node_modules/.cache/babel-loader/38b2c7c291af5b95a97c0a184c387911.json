{"ast":null,"code":"import _classCallCheck from \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/src/components/auth/login/LoginContainer.jsx\";\nimport React, { Component } from 'react';\nimport toastr from 'toastr';\nimport axios from 'axios';\nimport LoginDisplay from './LoginDisplay';\nvar url = 'http://localhost:3000/login';\n\nvar LoginContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginContainer, _Component);\n\n  function LoginContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LoginContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LoginContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      auth: {},\n      loading: false\n    };\n\n    _this.login = function (e) {\n      _this.setState({\n        loading: true\n      });\n\n      e.preventDefault();\n      var auth = _this.state.auth;\n      axios.post(url, auth).then(function (res) {\n        //console.log(res)\n        toastr.success(\"Bienvenido\");\n        localStorage.setItem('user', JSON.stringify(res.data.user));\n        localStorage.setItem('token', res.data.token);\n\n        _this.setState({\n          loading: false\n        });\n\n        _this.props.history.push('/profile');\n      }).catch(function (e) {\n        toastr.error(\"Algo salio mal\");\n\n        _this.setState({\n          loading: false\n        });\n      });\n    };\n\n    _this.onChange = function (e) {\n      var field = e.target.name;\n      var value = e.target.value;\n      var auth = _this.state.auth;\n      auth[field] = value;\n\n      _this.setState({\n        auth: auth\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(LoginContainer, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var user = JSON.parse(localStorage.getItem('user'));\n      if (user) return this.props.history.push('/');\n      this.setState({\n        user: user\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(LoginDisplay, {\n        onChange: this.onChange,\n        onSubmit: this.login,\n        loading: this.loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return LoginContainer;\n}(Component);\n\nexport default LoginContainer;","map":{"version":3,"sources":["/home/joseph/Escritorio/AquiEstoy/aquiestoy-front/src/components/auth/login/LoginContainer.jsx"],"names":["React","Component","toastr","axios","LoginDisplay","url","LoginContainer","state","auth","loading","login","e","setState","preventDefault","post","then","res","success","localStorage","setItem","JSON","stringify","data","user","token","props","history","push","catch","error","onChange","field","target","name","value","parse","getItem"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,IAAMC,GAAG,GAAG,6BAAZ;;IAEMC,c;;;;;;;;;;;;;;;;;UAEFC,K,GAAQ;AACJC,MAAAA,IAAI,EAAC,EADD;AAEJC,MAAAA,OAAO,EAAC;AAFJ,K;;UAYRC,K,GAAQ,UAACC,CAAD,EAAO;AACX,YAAKC,QAAL,CAAc;AAACH,QAAAA,OAAO,EAAC;AAAT,OAAd;;AACAE,MAAAA,CAAC,CAACE,cAAF;AAFW,UAGJL,IAHI,GAGI,MAAKD,KAHT,CAGJC,IAHI;AAIXL,MAAAA,KAAK,CAACW,IAAN,CAAWT,GAAX,EAAgBG,IAAhB,EACCO,IADD,CACM,UAAAC,GAAG,EAAE;AACP;AACAd,QAAAA,MAAM,CAACe,OAAP,CAAe,YAAf;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeL,GAAG,CAACM,IAAJ,CAASC,IAAxB,CAA7B;AACAL,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,GAAG,CAACM,IAAJ,CAASE,KAAvC;;AACA,cAAKZ,QAAL,CAAc;AAACH,UAAAA,OAAO,EAAC;AAAT,SAAd;;AACA,cAAKgB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB;AAEH,OATD,EAUCC,KAVD,CAUO,UAAAjB,CAAC,EAAE;AACNT,QAAAA,MAAM,CAAC2B,KAAP,CAAa,gBAAb;;AACA,cAAKjB,QAAL,CAAc;AAACH,UAAAA,OAAO,EAAC;AAAT,SAAd;AAEH,OAdD;AAeH,K;;UAEDqB,Q,GAAW,UAACnB,CAAD,EAAO;AACd,UAAMoB,KAAK,GAAGpB,CAAC,CAACqB,MAAF,CAASC,IAAvB;AACA,UAAMC,KAAK,GAAGvB,CAAC,CAACqB,MAAF,CAASE,KAAvB;AAFc,UAGP1B,IAHO,GAGC,MAAKD,KAHN,CAGPC,IAHO;AAIdA,MAAAA,IAAI,CAACuB,KAAD,CAAJ,GAAcG,KAAd;;AACA,YAAKtB,QAAL,CAAc;AAACJ,QAAAA,IAAI,EAAJA;AAAD,OAAd;AACH,K;;;;;;;yCAlCmB;AAEhB,UAAMe,IAAI,GAAGH,IAAI,CAACe,KAAL,CAAWjB,YAAY,CAACkB,OAAb,CAAqB,MAArB,CAAX,CAAb;AACA,UAAGb,IAAH,EAAS,OAAO,KAAKE,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,CAAP;AACT,WAAKf,QAAL,CAAc;AAACW,QAAAA,IAAI,EAAJA;AAAD,OAAd;AAEH;;;6BA8BO;AACJ,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,YAAD;AACA,QAAA,QAAQ,EAAE,KAAKO,QADf;AAEA,QAAA,QAAQ,EAAE,KAAKpB,KAFf;AAGA,QAAA,OAAO,EAAE,KAAKD,OAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADJ;AASH;;;;EArDwBR,S;;AAwD7B,eAAeK,cAAf","sourcesContent":["import React, {Component} from 'react'\nimport toastr from 'toastr'\nimport axios from 'axios'\nimport LoginDisplay from './LoginDisplay'\n\nconst url = 'http://localhost:3000/login'\n\nclass LoginContainer extends Component{\n\n    state = {\n        auth:{},\n        loading:false\n    }\n\n    componentWillMount(){\n         \n        const user = JSON.parse(localStorage.getItem('user'))\n        if(user) return this.props.history.push('/')\n        this.setState({user})\n       \n    }\n    login = (e) => {\n        this.setState({loading:true})\n        e.preventDefault()\n        const {auth} = this.state\n        axios.post(url, auth)\n        .then(res=>{\n            //console.log(res)\n            toastr.success(\"Bienvenido\")\n            localStorage.setItem('user', JSON.stringify(res.data.user))\n            localStorage.setItem('token', res.data.token)\n            this.setState({loading:false})\n            this.props.history.push('/profile')\n\n        })\n        .catch(e=>{\n            toastr.error(\"Algo salio mal\")\n            this.setState({loading:false})\n            \n        })\n    }\n\n    onChange = (e) => {\n        const field = e.target.name\n        const value = e.target.value\n        const {auth} = this.state\n        auth[field] = value\n        this.setState({auth})\n    }\n\n    render(){\n        return(\n            <div>\n              <LoginDisplay \n              onChange={this.onChange}\n              onSubmit={this.login}\n              loading={this.loading}\n              />\n            </div>\n        )\n    }\n}\n\nexport default LoginContainer"]},"metadata":{},"sourceType":"module"}